
# referrer

----

@太伯
http://stackoverflow.com/questions/1890532/ie-has-empty-document-referrer-after-a-location-replace
http://www.receptional.com/blogs/web-analytics/how-redirect-and-keep-referrer-data-web-analytics
http://life.janlay.com/2006/12/ie_21.html

@晴川
可惜资料老了 刚才实测XP下的 Cr Fx 和 IE 不管 meta refresh 还是 js location 都不发送referer了

@徐干：
在 IE6、7、8中，始终不在使用 META 元素控制跳转时附加 Referer 字段到请求头中。在普通页面中，当脚本调用 location 对象进行跳转时也不会附加 Referer 字段信息。在 Firefox 中，始终不在使用 META 元素控制跳转时附加 Referer 字段到请求头中。若服务端需要获得正确的 Referer 字段信息，则应采用各浏览器均可以附加 Referer 字段信息的方式进行跳转。如，普通超链接、表单提交、HTTP 302 跳转



工具 -> Internet 选项 -> 高级 -> 设置 -> 安全 -> 在安全和非安全模式之间切换时发出警告。




janlay(太伯) (20:46:41):
我来接一下。那个各种方法发送引用页的问题，根本上来说，都不如制造一个链接并点击它可靠。
异草 (20:46:43):
大伯的信息具有混淆的作用
工友星(晴川) (20:47:28):
刚 fiddler 试过了 meta 方式 和  js 操作 location 方式 都不会产生 referer T_T

janlay(太伯) (2012-06-05 20:47:43):
发送引用页是浏览器负责的事情，每个浏览器及其不同版本，对是否要发送引用可能持有不同的看法，无所谓规范或标准。
工友星(晴川) (2012-06-05 20:48:13):
嗯 顶大伯这句 刚我那句话针对 XP/IE8
janlay(太伯) (2012-06-05 20:48:39):
比如，多tab浏览器大多支持滚轮点击链接开新tab，你说这种情况下要不要发送引用呢？
工友星(晴川) (2012-06-05 20:48:56):
我说要 哈哈
janlay(太伯) (2012-06-05 20:48:59):
事实上大多数国产浏览器都不发，IE会发
因为引用页数据是直接跟隐私相关的，所以会导致有不同的理解
janlay(太伯) (2012-06-05 20:50:02):
比如那个 location.replace() 如果我是浏览器的PD，会要求不发
因为按照我的理解，这个方法的功能是，抹掉历史记录中的当前页
工友星(晴川) (2012-06-05 20:50:40):
还得考虑他是线程实现还是进程实现 =,=
janlay(太伯) (2012-06-05 20:50:58):
本地都抹掉了，我当然不希望被下一个页面的服务端知道
这是窗口产生的历史顺序，与线程/进程无关
伯约.王磊(伯约) (2012-06-05 20:51:51):
本地抹掉和服务端记录还是有本质区别的
janlay(太伯) (2012-06-05 20:52:17):
是有本质区别，从隐私保护上来说，我不希望下一个页面知道来源
工友星(晴川) (2012-06-05 20:54:34):
我说进程和线程是针对多标签页的实现来说的 同进程才共享会话啊
不这么实现 那些国产多标签的 就是不停的进程间做同步 各种越弄越乱 难以预期
janlay(太伯) (2012-06-05 20:55:13):
不管共享不共享，不同tab的history是完全独立的
伯约.王磊(伯约) (2012-06-05 20:55:31):
这个我同意
janlay(太伯) (2012-06-05 20:55:37):
所有多tab浏览器都是这样设定的
